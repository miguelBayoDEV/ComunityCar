{% extends 'base.html.twig' %}

{% block title %}Search{% endblock %}

{% block body %}
    {# Mostrar opciones de busqueda #}
    <form action="/buscador" method="post">
        <select name="marcas" id="marcas">
            <option value="" selected>Seleccionar</option>
            {% for marca in marcas %}
                <option value="{{ marca }}">{{ marca|upper }}</option>
            {% endfor %}
        </select>
        <select name="modelos" id="modelos">
            <option value="" selected>Seleccionar</option>
            {% for modelo in modelos %}
                <option value="{{ modelo }}">{{ modelo|upper }}</option>
            {% endfor %}
        </select>
        <input type="submit" name="buscar" />
    </form>

    {# Mostrar vehículos #}
    {% for vehicle in vehicles %}
        {% if vehicle.eliminado == false and vehicle.venta == true %}
            <div class="vehicles">
                Marca: {{ vehicle.marca }}
                Modelo: {{ vehicle.modelo }}
                {{ vehicle.propietario.email }}
                {{ vehicle.fechaModificacion|date('Y-m-d H:i:s') }}
                <button><a href="{{ path('message_new', {'receptor': vehicle.propietario.id, 'emisor': user.id, 'id': vehicle.id, 'vehiculo': vehicle.id}) }}">Enviar mensaje</a></button>
            </div>
        {% endif %}
    {% endfor %}

    {# Paginación #}
    <div class="page">
        <button><a href="/page/first">Primero</a></button>
        <button><a href="/page/before">Anterior</a></button>
        {% for contador in 0 .. contadorTotal %}
            <button><a href="/page/{{contador}}">{{ contador + 1 }}</a></button>
        {% endfor %}
        <button><a href="/page/after">Posterior</a></button>
        <button><a href="/page/last">Último</a></button>
    </div>
{% endblock %}
